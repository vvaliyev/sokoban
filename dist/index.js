(()=>{"use strict";var t,e,n,l,o,a,i={349:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Item=void 0;e.Item=function(t){this.position=t}},481:function(t,e,n){var l,o=this&&this.__extends||(l=function(t,e){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},l(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__assign||function(){return a=Object.assign||function(t){for(var e,n=1,l=arguments.length;n<l;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},a.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.MovableItem=void 0;var i=function(t){function e(e){var n=t.call(this,e)||this;return n._state="DEFAULT",n}return o(e,t),e.prototype.getNextPosition=function(t){switch(t){case"up":return a(a({},this.position),{y:this.position.y-1});case"down":return a(a({},this.position),{y:this.position.y+1});case"left":return a(a({},this.position),{x:this.position.x-1});case"right":return a(a({},this.position),{x:this.position.x+1})}},e.prototype.move=function(t){this.position=this.getNextPosition(t)},Object.defineProperty(e.prototype,"state",{get:function(){return this._state},set:function(t){this._state=t},enumerable:!1,configurable:!0}),e}(n(349).Item);e.MovableItem=i},219:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Sokoban=void 0;var l=n(349),o=n(481),a=function(){function t(t){var e=this;this.map=t,this.boxes=[],this.walls=[],this.slots=[],this.map.forEach((function(t,n){t.forEach((function(t,a){"player"===t&&(e.player=new o.MovableItem({x:a,y:n})),"wall"===t&&e.walls.push(new l.Item({x:a,y:n})),"box"===t&&e.boxes.push(new o.MovableItem({x:a,y:n})),"slot"===t&&e.slots.push(new l.Item({x:a,y:n}))}))}))}return t.prototype.hasWallIn=function(t){var e=t.x,n=t.y;return"wall"===this.map[n][e]},t.prototype.findBoxIn=function(t){var e=t.x,n=t.y;return this.boxes.find((function(t){return t.position.x===e&&t.position.y===n}))},t.prototype.hasSlotIn=function(t){var e=t.x,n=t.y;return"slot"===this.map[n][e]},t.prototype.movePlayer=function(t){var e=this.player.getNextPosition(t);if(!this.hasWallIn(e)){var n=this.findBoxIn(e);if(!n)return this.player.move(t);var l=this.findBoxIn(n.getNextPosition(t)),o=this.hasWallIn(n.getNextPosition(t));l||o||(this.player.move(t),n.move(t),this.hasSlotIn(n.position)&&(n.state="IN_SLOT"))}},t.prototype.getMapDimensions=function(){return{width:this.map[0].length,height:this.map.length}},t.prototype.isCompleted=function(){return this.boxes.every((function(t){return"IN_SLOT"===t.state}))},t}();e.Sokoban=a},153:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SokobanCanvasRenderer=void 0;var n=function(){function t(t,e,n){this.sokaban=t,this.canvas=e,this.config=n,this.ctx=this.canvas.getContext("2d");var l=this.sokaban.getMapDimensions(),o=l.width,a=l.height;this.canvas.width=o*n.cellLength,this.canvas.height=a*n.cellLength}return t.prototype.drawImage=function(t,e){this.ctx.drawImage(e,t.position.x*this.config.cellLength,t.position.y*this.config.cellLength)},t.prototype.render=function(){var t=this;this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.sokaban.walls.forEach((function(e){return t.drawImage(e,t.config.wallImage)})),this.sokaban.slots.forEach((function(e){t.drawImage(e,t.config.slotImage)})),this.drawImage(this.sokaban.player,this.config.playerImage),this.sokaban.boxes.forEach((function(e){t.drawImage(e,t.config.boxImage[e.state])})),this.sokaban.isCompleted()},t}();e.SokobanCanvasRenderer=n},913:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.keyboardConfig=e.renderConfig=e.mapsByLevel=void 0;var n=36,l=new Image(n,n),o=new Image(n,n),a=new Image(n,n),i=new Image(n,n),s=new Image(n,n);l.src="images/player.gif",o.src="images/wall.gif",a.src="images/box.gif",i.src="images/box-success.gif",s.src="images/slot.gif",e.mapsByLevel={1:[[null,"wall","wall","wall","wall","wall",null,null,null],[null,"wall",null,null,null,"wall","wall","wall","wall"],[null,"wall",null,null,null,"wall",null,null,"wall"],[null,"wall","wall",null,null,null,null,"slot","wall"],["wall","wall","wall",null,"wall","wall","wall","slot","wall"],["wall",null,"box",null,"wall",null,"wall","slot","wall"],["wall",null,"box","box","wall",null,"wall","wall","wall"],["wall","player",null,null,"wall",null,null,null,null],["wall","wall","wall","wall","wall",null,null,null,null]]},e.renderConfig={wallImage:o,boxImage:{DEFAULT:a,IN_SLOT:i},slotImage:s,playerImage:l,cellLength:n},e.keyboardConfig={w:"up",ArrowUp:"up",d:"right",ArrowRight:"right",a:"left",ArrowLeft:"left",s:"down",ArrowDown:"down"}}},s={};function r(t){var e=s[t];if(void 0!==e)return e.exports;var n=s[t]={exports:{}};return i[t].call(n.exports,n,n.exports,r),n.exports}t=r(219),e=r(913),n=r(153),new Notification("Hi there!"),l=document.querySelector("canvas"),o=new t.Sokoban(e.mapsByLevel[1]),a=new n.SokobanCanvasRenderer(o,l,e.renderConfig),document.addEventListener("keydown",(function(t){var n=e.keyboardConfig[t.key];n&&(o.movePlayer(n),a.render())})),a.render()})();